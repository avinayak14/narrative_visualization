<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Narrative Visualization</title>
  <link rel="stylesheet" type="text/css" href="styles/fullpage.min.css"></style>
  <link rel="stylesheet" type="text/css" href="styles/style.css"></style>
</head>
<body>

  <div id="fullpage">
    <div class="section">

      <div class="slide" data-anchor="welcome">
        <h1>An Inspection of Operating Automobiles in 2017</h1>
        <div class="intro">
          <p>&nbsp;</p>
          <div>Author: Avi Nayak</div>
        </div>
      </div>

      <div class="slide" data-anchor="dataset">
        <h2>Description of the Data</h2>
        <div class="intro">
          <p>
            The data being used here is based on averaged attributes of 2017
            automobile manufacturers. It contains the make, fuel type, engine
            cylinder count, average highway MPG, and average city MPG of several
            different types of cars.
          </p>
          <p>
            The primary goal of this interactive slideshow visualization is to
            exhibit a presentation via a set of interactive webpages. It is conveyed
            in narrative format, using data to tell a story, and it invites viewers
            to explore further and serves as a medium for data journalism.
            <a class="section-1-button" rel="noopener" href="#charts/about">Description of the Visualization</a>
          </p>
        </div>
      </div>

      <div class="slide" data-anchor="about">
        <h2>Description of the Visualization</h2>
        <div class="intro">
          <p>
            <strong>Interactive Slideshow</strong>
            This narrative visualization follows an interactive slideshow structure to guide users through
            various selected scenarios.
          </p>
        </div>
      </div>
      <div class="slide">
        <h3>Average Highway MPG vs. Average City MPG</h3>
        <script src='https://d3js.org/d3.v4.min.js'></script>
        <script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>
        <style> circle {fill: lightblue; stroke: black;} </style>
        <body onload='init()'>
        <svg width=300 height=300>
        </svg>
        </body>
        <script>
          async function init() {
            const xScale = d3.scaleLog().domain([10, 150]).range([0, 200]);
            const yScale = d3.scaleLog().domain([10, 150]).range([200, 0]);

            const xAxis = d3.axisBottom(xScale).tickValues([10, 20, 50, 100]);
            const yAxis = d3.axisLeft(yScale).tickValues([10, 20, 50, 100]);

            const svg = d3.select('svg');
            svg.append('g')
                .attr('transform', 'translate(50,50)')
                .call(yAxis);

            svg.append('g')
                .attr('transform', 'translate(50,250)')
                .call(xAxis);

            const annotations = [
              {
                note: {
                  label: "Starts producing"
                },
                connector: {
                  end: "arrow"
                },
                // type: d3.annotationLabel,
                x: 100,
                y: 200,
                dx: 0,
                dy: -25
              },
              {
                note: {
                  label: "Peak so far"
                },
                connector: {
                  end: "arrow"
                },
                // type: d3.annotationLabel,
                x: 200,
                y: 200,
                dx: 0,
                dy: -25
              }
            ];
            const makeAnnotations = d3.annotation().annotations(annotations);
            svg.append('g').call(makeAnnotations);

            const row = d => {
              d.EngineCylinders = +d.EngineCylinders;
              d.AverageHighwayMPG = +d.AverageHighwayMPG;
              d.AverageCityMPG = +d.AverageCityMPG;
              return d;
            };

            await d3.csv('data/cars_2017.csv', row, data => {
              console.log(data);
              svg.append('g').attr('transform', 'translate(50,50)').selectAll("circle")
                  .data(data)
                  .enter()
                  .append("circle")
                  .attr('cx', d => xScale(d.AverageCityMPG))
                  .attr('cy', d => yScale(d.AverageHighwayMPG))
                  .attr('r', d => parseInt(d.EngineCylinders, 10) + 2);
            });
          }
        </script>
      </div>
      <div class="slide">
        <h3>Average Highway MPG vs. Average City MPG (With Filter)</h3>
        <script src='https://d3js.org/d3.v4.min.js'></script>
        <script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>
        <style> circle {fill: lightblue; stroke: black;} </style>
        <body onload='init_v2()'>
        <svg width=300 height=300>
        </svg>
        </body>
        <script>
          async function init_v2() {
            const xScale = d3.scaleLog().domain([10, 150]).range([0, 200]);
            const yScale = d3.scaleLog().domain([10, 150]).range([200, 0]);

            const xAxis = d3.axisBottom(xScale).tickValues([10, 20, 50, 100]);
            const yAxis = d3.axisLeft(yScale).tickValues([10, 20, 50, 100]);

            const svg = d3.select('svg');
            svg.append('g')
                .attr('transform', 'translate(50,50)')
                .call(yAxis);

            svg.append('g')
                .attr('transform', 'translate(50,250)')
                .call(xAxis);

            const annotations = [
              {
                note: {
                  label: "Starts producing"
                },
                connector: {
                  end: "arrow"
                },
                type: d3.annotationLabel,
                x: 100,
                y: 200,
                dx: 0,
                dy: -25
              },
              {
                note: {
                  label: "Peak so far"
                },
                connector: {
                  end: "arrow"
                },
                type: d3.annotationLabel,
                x: 200,
                y: 200,
                dx: 0,
                dy: -25
              }
            ];
            const makeAnnotations = d3.annotation().annotations(annotations);
            svg.append('g').call(makeAnnotations);

            const data = await d3.csv('data/cars_2017.csv', row);

            svg.append('g').attr('transform', 'translate(50,50)').selectAll("circle")
                  .data(data)
                  .enter()
                  .append("circle")
                  .attr('cx', d => xScale(d.AverageCityMPG))
                  .attr('cy', d => yScale(d.AverageHighwayMPG))
                  .attr('r', d => parseInt(d.EngineCylinders, 10) + 2);
          }
        </script>
      </div>
      <!-- <div class="slide">
        <h3>Average Highway MPG vs. Average City MPG (With Filter)</h3>
        <script src='https://d3js.org/d3.v4.min.js'></script>
        <script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>
        <style> circle {fill: lightblue; stroke: black;} </style>
        <body onload='init_v2()'>
        <svg width=300 height=300>
        </svg>
        </body>
        <script>
          async function init_v2() {
            const xScale = d3.scaleLog().domain([10, 150]).range([0, 200]);
            const yScale = d3.scaleLog().domain([10, 150]).range([200, 0]);

            const xAxis = d3.axisBottom(xScale).tickValues([10, 20, 50, 100]);
            const yAxis = d3.axisLeft(yScale).tickValues([10, 20, 50, 100]);

            const svg = d3.select('svg');
            svg.append('g')
                .attr('transform', 'translate(50,50)')
                .call(yAxis);

            svg.append('g')
                .attr('transform', 'translate(50,250)')
                .call(xAxis);

            const annotations = [
              {
                note: {
                  label: "Starts producing"
                },
                connector: {
                  end: "arrow"
                },
                type: d3.annotationLabel,
                x: 100,
                y: 200,
                dx: 0,
                dy: -25
              },
              {
                note: {
                  label: "Peak so far"
                },
                connector: {
                  end: "arrow"
                },
                type: d3.annotationLabel,
                x: 200,
                y: 200,
                dx: 0,
                dy: -25
              }
            ];
            const makeAnnotations = d3.annotation().annotations(annotations);
            svg.append('g').call(makeAnnotations);

            const row = d => {
              d.EngineCylinders = +d.EngineCylinders;
              d.AverageHighwayMPG = +d.AverageHighwayMPG;
              d.AverageCityMPG = +d.AverageCityMPG;
              return d;
            };

            await d3.csv('data/cars_2017.csv', row, data => {
              console.log(data);
              svg.append('g').attr('transform', 'translate(50,50)').selectAll("circle")
                  .data(data)
                  .enter()
                  .append("circle")
                  .attr('cx', d => xScale(d.AverageCityMPG))
                  .attr('cy', d => yScale(d.AverageHighwayMPG))
                  .attr('r', d => parseInt(d.EngineCylinders, 10) + 2);
            });
          }
        </script>
      </div> -->
      <div class="slide" data-anchor="source">
        <h2>Sources</h2>
        <div class="intro">
          <p>
            <strong>Dataset</strong><br/>
            Test 1
            <!-- <a href="https://www.kaggle.com/luiscorter/netflix-original-films-imdb-scores" target="_blank">
              https://www.kaggle.com/luiscorter/netflix-original-films-imdb-scores
            </a> -->
          </p>
          <p>
            <strong>Fullpage.js (used for slideshow)</strong><br/>
            <!-- <a href="https://github.com/alvarotrigo/fullPage.js" target="_blank">
              https://github.com/alvarotrigo/fullPage.js
            </a> -->
            Test 2
          </p>
          <p>
            <strong>Source code</strong><br/>
            <!-- <a href="https://github.com/skyripley/cs416-data-visualization" target="_blank">
              https://github.com/skyripley/cs416-data-visualization
            </a> -->
            Test 3
          </p>
        </div>
      </div>
    </div>
  </div>


  <script src="scripts/scrolloverflow.min.js"></script>
  <script src="scripts/fullpage.min.js"></script>
  <script src="scripts/d3.v4.min.js"></script>
  <script src="https://d3js.org/d3-color.v1.min.js"></script>
  <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/d3-array@3"></script>
  <script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>
  <script>
    var charts = {};
  </script>
  <script src="scripts/chart1.js"></script>
  <script src="scripts/chart2.js"></script>
  <script src="scripts/chart3.js"></script>
  <script src="scripts/main.js"></script>
</body>
</html>
